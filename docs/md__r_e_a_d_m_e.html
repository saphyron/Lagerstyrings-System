<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lagerstyrings System: Lagerstyrings-System â€” README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lagerstyrings System<span id="projectnumber">&#160;n/a</span>
   </div>
   <div id="projectbrief">Frontend og Backend til et lagerstyringssystem</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__r_e_a_d_m_e.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Lagerstyrings-System â€” README </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md4"></a></p>
<p><b>Legend:</b> ğŸ“ Folder â€¢ ğŸ§© C#-Code â€¢ âš™ï¸ config/json â€¢ ğŸªª .sln/.csproj â€¢ ğŸ§¾ README/MD</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md5"></a>
Code Structure</h1>
<div class="fragment"><div class="line">ğŸ“ Lagerstyrings-System/</div>
<div class="line">â”œâ”€ ğŸªª Lagerstyrings System.slnx</div>
<div class="line">â”œâ”€ ğŸ§¾ ER-Diagram.md</div>
<div class="line">â”œâ”€ ğŸ§¾ LICENSE</div>
<div class="line">â”œâ”€ ğŸ§¾ .gitignore</div>
<div class="line">â”œâ”€ ğŸ“ Lagerstyrings System/                     (Backend â€” Minimal API, SQL Server, JWT)</div>
<div class="line">â”‚  â”œâ”€ ğŸªª Lagerstyrings System.csproj</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ appsettings.json</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ appsettings.Development.json</div>
<div class="line">â”‚  â”œâ”€ ğŸ“ Properties/</div>
<div class="line">â”‚  â”‚  â””â”€ âš™ï¸ launchSettings.json                 (http://localhost:5107; https://localhost:7261)</div>
<div class="line">â”‚  â”œâ”€ ğŸ§© Program.cs                             (DI, JWT auth, endpoint mapping)</div>
<div class="line">â”‚  â””â”€ ğŸ“ src/</div>
<div class="line">â”‚     â”œâ”€ ğŸ“ Database/</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© ISqlConnectionFactory.cs</div>
<div class="line">â”‚     â”‚  â””â”€ ğŸ§© SqlconnectionFactory.cs          (Microsoft.Data.SqlClient)</div>
<div class="line">â”‚     â”œâ”€ ğŸ“ Endpoints/</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ“ AuthenticationEndpoints/</div>
<div class="line">â”‚     â”‚  â”‚  â”œâ”€ ğŸ§© AuthEndpoints.cs              (/auth/roles â€¦)</div>
<div class="line">â”‚     â”‚  â”‚  â””â”€ ğŸ§© UserEndpoints.cs              (/auth/users â€¦ + /auth/users/login)</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© LogEndpoints.cs</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© OrderEndpoints.cs                (/orders â€¦)</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© OrderItemEndpoints.cs            (/orderitems â€¦)</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© ProductEndpoints.cs              (/products â€¦)</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© WarehouseEndpoints.cs            (/warehouses â€¦)</div>
<div class="line">â”‚     â”‚  â””â”€ ğŸ§© WarehouseProductEndpoints.cs     (/warehouseproducts â€¦)</div>
<div class="line">â”‚     â”œâ”€ ğŸ“ Orders/</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© IOrder.cs</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© Order.cs                         (includes OrderRepository)</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© OrderItem.cs</div>
<div class="line">â”‚     â”‚  â””â”€ ğŸ§© OrderTypeEnum.cs</div>
<div class="line">â”‚     â”œâ”€ ğŸ“ Product/</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© IProduct.cs</div>
<div class="line">â”‚     â”‚  â”œâ”€ ğŸ§© Product.cs                       (includes ProductRepository)</div>
<div class="line">â”‚     â”‚  â””â”€ ğŸ§© ProductTypeEnum.cs</div>
<div class="line">â”‚     â”œâ”€ ğŸ“ Sku/</div>
<div class="line">â”‚     â”‚  â””â”€ ğŸ§© WarehouseProduct.cs              (includes WarehouseProductRepository)</div>
<div class="line">â”‚     â””â”€ ğŸ“ Warehouse/</div>
<div class="line">â”‚        â”œâ”€ ğŸ§© IWarehouse.cs</div>
<div class="line">â”‚        â””â”€ ğŸ§© Warehouse.cs                     (includes WarehouseRepository)</div>
<div class="line">â”œâ”€ ğŸ“ Lagerstyring Frontend/                    (Frontend â€” Razor Pages, JWT cookie)</div>
<div class="line">â”‚  â”œâ”€ ğŸªª Lagerstyring Frontend.csproj</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ appsettings.json                       (Api:BaseUrl; Jwt settings)</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ appsettings.Development.json</div>
<div class="line">â”‚  â”œâ”€ ğŸ“ Properties/</div>
<div class="line">â”‚  â”‚  â””â”€ âš™ï¸ launchSettings.json                 (http://localhost:5267; https://localhost:7267)</div>
<div class="line">â”‚  â”œâ”€ ğŸ§© Program.cs                             (Razor Pages, JWT bearer; reads cookie `AuthToken`)</div>
<div class="line">â”‚  â”œâ”€ ğŸ“ Pages/</div>
<div class="line">â”‚  â”‚  â”œâ”€ ğŸ“ Account/</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© Login.cshtml</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© Login.cshtml.cs</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© Logout.cshtml</div>
<div class="line">â”‚  â”‚  â”‚  â””â”€ ğŸ§© Logout.cshtml.cs</div>
<div class="line">â”‚  â”‚  â”œâ”€ ğŸ“ Admin/</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© Index.cshtml</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© Index.cshtml.cs</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© Users.cshtml</div>
<div class="line">â”‚  â”‚  â”‚  â””â”€ ğŸ§© Users.cshtml.cs</div>
<div class="line">â”‚  â”‚  â”œâ”€ ğŸ“ Order/</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© CreateOrder.cshtml</div>
<div class="line">â”‚  â”‚  â”‚  â””â”€ ğŸ§© CreateOrder.cshtml.cs</div>
<div class="line">â”‚  â”‚  â”œâ”€ ğŸ“ Warehouse/</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© Warehouses.cshtml</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© Warehouses.cshtml.cs</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© WarehouseView.cshtml</div>
<div class="line">â”‚  â”‚  â”‚  â””â”€ ğŸ§© WarehouseView.cshtml.cs</div>
<div class="line">â”‚  â”‚  â”œâ”€ ğŸ“ Shared/</div>
<div class="line">â”‚  â”‚  â”‚  â”œâ”€ ğŸ§© _Layout.cshtml</div>
<div class="line">â”‚  â”‚  â”‚  â””â”€ ğŸ§© _ValidationScriptsPartial.cshtml</div>
<div class="line">â”‚  â”‚  â””â”€ ğŸ§© _ViewImports.cshtml</div>
<div class="line">â”‚  â”œâ”€ ğŸ“ User/</div>
<div class="line">â”‚  â”‚  â””â”€ ğŸ§© User.cs</div>
<div class="line">â”‚  â””â”€ ğŸ§© GlobalUsings.cs</div>
<div class="line">â”œâ”€ ğŸ“ SQL Statements/                            (SQL Server scripts)</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ CreateDatabase.sql</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ CreateTables.sql</div>
<div class="line">â”‚  â””â”€ âš™ï¸ InsertIntoTable.sql</div>
<div class="line">â”œâ”€ ğŸ“ Scripts/</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ Tests.ps1</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ httpie-collection-authendpoints.json</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ httpie-collection-userendpoints.json</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ httpie-collection-orderendpoints.json</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ httpie-collection-orderitemendpoint.json</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ httpie-collection-productendpoints.json</div>
<div class="line">â”‚  â”œâ”€ âš™ï¸ httpie-collection-warehouseendpoints.json</div>
<div class="line">â”‚  â””â”€ âš™ï¸ httpie-collection-warehouseproductendpoint.json</div>
<div class="line">â””â”€ ğŸ“ tests/                                      (xUnit contract tests)</div>
<div class="line">   â”œâ”€ ğŸªª Test-First.csproj                        (net8.0)</div>
<div class="line">   â””â”€ ğŸ“ src/</div>
<div class="line">      â”œâ”€ ğŸ“ Helpers/</div>
<div class="line">      â”‚  â”œâ”€ ğŸ§© Database.cs</div>
<div class="line">      â”‚  â”œâ”€ ğŸ§© DbUtility.cs</div>
<div class="line">      â”‚  â”œâ”€ ğŸ§© OrdersInvoker.cs</div>
<div class="line">      â”‚  â”œâ”€ ğŸ§© OrdersHttpInvoker.cs</div>
<div class="line">      â”‚  â””â”€ ğŸ§© OrdersCliInvoker.cs</div>
<div class="line">      â””â”€ ğŸ“ Spectests/</div>
<div class="line">         â”œâ”€ ğŸ§© AuthRolesContractTests.cs</div>
<div class="line">         â”œâ”€ ğŸ§© UserContractTests.cs</div>
<div class="line">         â”œâ”€ ğŸ§© OrdersContractTests.cs</div>
<div class="line">         â”œâ”€ ğŸ§© OrderItemsContractTests.cs</div>
<div class="line">         â”œâ”€ ğŸ§© ProductsContractTests.cs</div>
<div class="line">         â”œâ”€ ğŸ§© WarehouseContractTests.cs</div>
<div class="line">         â””â”€ ğŸ§© WarehouseProducts.cs</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
System Requirements</h1>
<ul>
<li><b>.NET SDK:</b> 9.0 (backend and frontend target <span class="tt">net9.0</span>).</li>
<li><b>.NET Runtime for tests:</b> 8.0 (tests project targets <span class="tt">net8.0</span>).</li>
<li><b>SQL Server:</b> A local or remote SQL Server instance reachable by the connection string in configuration.</li>
<li><b>PowerShell:</b> Windows PowerShell 5.1 (for <span class="tt">Scripts\Tests.ps1</span>).</li>
<li><b>Optional:</b> HTTPie Desktop/CLI to use the included HTTP collections.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md7"></a>
Configuration</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8"></a>
Backend (<span class="tt">Lagerstyrings System/appsettings*.json</span>)</h2>
<ul>
<li><span class="tt">ConnectionStrings:Default</span> â€” SQL Server connection string.</li>
<li><span class="tt">Jwt:Issuer</span>, <span class="tt">Jwt:Audience</span>, <span class="tt">Jwt:Key</span> â€” JWT settings used by both API and frontend.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
Frontend (<span class="tt">Lagerstyring Frontend/appsettings*.json</span>)</h2>
<ul>
<li><span class="tt">Api:BaseUrl</span> â€” base URL of the backend API (default points to <span class="tt"><a href="http://localhost:5107">http://localhost:5107</a></span>).</li>
<li><span class="tt">Jwt:Issuer</span>, <span class="tt">Jwt:Audience</span>, <span class="tt">Jwt:Key</span> â€” must match the backend.</li>
</ul>
<blockquote class="doxtable">
<p>Note: The frontend reads the JWT from an <b>HttpOnly cookie</b> named <b><span class="tt">AuthToken</span></b> (set on successful login). The frontend config includes authentication middleware configured for this cookie. </p>
</blockquote>
<h1 class="doxsection"><a class="anchor" id="autotoc_md10"></a>
Database Setup (SQL Server)</h1>
<ol type="1">
<li>Create the database:<ul>
<li>Run <span class="tt">SQL Statements/CreateDatabase.sql</span> against your SQL Server.</li>
</ul>
</li>
<li>Create schema (drops existing objects in the target DB):<ul>
<li>Run <span class="tt">SQL Statements/CreateTables.sql</span>.</li>
</ul>
</li>
<li>(Optional) Clear/reseed utility:<ul>
<li><span class="tt">SQL Statements/InsertIntoTable.sql</span> cleans/resets data (no demo users are inserted here).</li>
</ul>
</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md11"></a>
How to Build and Launch</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md12"></a>
Backend API (Minimal API)</h2>
<ul>
<li>Working directory: repository root.</li>
<li><p class="startli">Run:</p>
<div class="fragment"><div class="line">dotnet run --project &quot;Lagerstyrings System/Lagerstyrings System.csproj&quot;</div>
</div><!-- fragment --></li>
<li>Default URLs (from <span class="tt">launchSettings.json</span>):<ul>
<li>HTTP: <span class="tt"><a href="http://localhost:5107">http://localhost:5107</a></span></li>
<li>HTTPS: <span class="tt"><a href="https://localhost:7261">https://localhost:7261</a></span></li>
</ul>
</li>
<li>Health route:<ul>
<li><span class="tt">GET /</span> â†’ <span class="tt">{ ok = true, service = "Lagerstyrings System API" }</span></li>
</ul>
</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md13"></a>
Frontend (Razor Pages)</h2>
<ul>
<li>Working directory: repository root.</li>
<li>Ensure <span class="tt">Api:BaseUrl</span> in <span class="tt">Lagerstyring Frontend/appsettings.json</span> points to the backend.</li>
<li><p class="startli">Run:</p>
<div class="fragment"><div class="line">dotnet run --project &quot;Lagerstyring Frontend/Lagerstyring Frontend.csproj&quot;</div>
</div><!-- fragment --></li>
<li>Default URLs (from <span class="tt">launchSettings.json</span>):<ul>
<li>HTTP: <span class="tt"><a href="http://localhost:5267">http://localhost:5267</a></span></li>
<li>HTTPS: <span class="tt"><a href="https://localhost:7267">https://localhost:7267</a></span></li>
</ul>
</li>
<li>Entry:<ul>
<li>Root (<span class="tt">/</span>) routes to <span class="tt">/Account/Login</span>. On success, the page stores the JWT in the <span class="tt">AuthToken</span> cookie.</li>
</ul>
</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md14"></a>
Creating a User and Logging In</h2>
<ul>
<li>The <b>Users</b> table stores <span class="tt">Username</span>, <span class="tt">PasswordClear</span>, <span class="tt">AuthEnum</span>, and optional <span class="tt">WarehouseId</span> (see <span class="tt">CreateTables.sql</span>).</li>
<li>The API exposes:<ul>
<li><span class="tt">POST /auth/users</span> to create a user (expects <span class="tt">Username</span>, <span class="tt">PasswordClear</span>, <span class="tt">AuthEnum</span>, <span class="tt">WarehouseId</span>).</li>
<li><span class="tt">POST /auth/users/login</span> to obtain a JWT by <span class="tt">Username</span> and <span class="tt">Password</span>.</li>
</ul>
</li>
<li>HTTPie collections in <span class="tt">/Scripts</span> include ready-made requests for these endpoints.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
API Overview (route groups)</h1>
<p>These are registered in <span class="tt">Program.cs</span> and corresponding <span class="tt">*Endpoints.cs</span>:</p>
<ul>
<li><span class="tt">/auth/roles</span> â€” CRUD for authorization roles (group has <span class="tt">RequireAuthorization()</span> in code).</li>
<li><span class="tt">/auth/users</span> â€” CRUD for users (group has <span class="tt">RequireAuthorization()</span>; selected routes call <span class="tt">.AllowAnonymous()</span> in code).<ul>
<li><span class="tt">/auth/users/login</span> â€” anonymous login endpoint (JWT issuance).</li>
</ul>
</li>
<li><span class="tt">/orders</span> â€” create, read (by id, by user), update, patch status, delete.</li>
<li><span class="tt">/orderitems</span> â€” create, read by order, read product count within order, update, delete.</li>
<li><span class="tt">/warehouses</span> â€” CRUD.</li>
<li><span class="tt">/products</span> â€” CRUD.</li>
<li><span class="tt">/warehouseproducts</span> â€” CRUD + by-warehouse listing.</li>
</ul>
<blockquote class="doxtable">
<p>Authorization notes based on code at time of inspection:</p>
<ul>
<li>The <b>AuthRoles</b> and <b>Users</b> route groups call <span class="tt">RequireAuthorization()</span>; multiple user routes additionally call <span class="tt">AllowAnonymous()</span>.</li>
<li>Other resource groups (<b>products</b>, <b>warehouses</b>, <b>orders</b>, <b>orderitems</b>, <b>warehouseproducts</b>) do not call <span class="tt">RequireAuthorization()</span> in their endpoint mapping files. </li>
</ul>
</blockquote>
<h1 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Tests</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
Test Project</h2>
<ul>
<li>Location: <span class="tt">tests</span></li>
<li>Framework: xUnit (<span class="tt">Test-First.csproj</span> targets <span class="tt">net8.0</span>).</li>
<li>Contract tests exist for users, roles, orders, order-items, products, warehouses, and warehouse-products.</li>
<li><a class="el" href="namespace_tests.html">Tests</a> rely on environment variables for service URLs and DB connection (see below).</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Environment variables used by tests</h2>
<ul>
<li><span class="tt">ConnectionStrings__Default</span></li>
<li><span class="tt">ORDERS_URL</span></li>
<li><span class="tt">CATALOG_URL</span></li>
<li><span class="tt">INVENTORY_URL</span></li>
<li><span class="tt">PRODUCTS_URL</span></li>
<li><span class="tt">AUTH_URL</span></li>
<li><span class="tt">ORDERS_CLI</span> (optional; used by CLI-based helpers)</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
Run tests (standard)</h2>
<p>From repository root:</p>
<div class="fragment"><div class="line">dotnet test tests/Test-First.csproj</div>
</div><!-- fragment --><p>Examples with logging:</p>
<div class="fragment"><div class="line">dotnet test tests/Test-First.csproj -l &quot;trx;LogFileName=TestResults.trx&quot;</div>
<div class="line">dotnet test tests/Test-First.csproj --filter &quot;FullyQualifiedName~ProductsContractTests&quot;</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
Run tests via script (<span class="tt">Scripts\Tests.ps1</span>)</h2>
<p>PowerShell 5.1 examples (from repository root):</p>
<div class="fragment"><div class="line"># Default run</div>
<div class="line">powershell -NoProfile -ExecutionPolicy Bypass -File .\Scripts\Tests.ps1</div>
<div class="line"> </div>
<div class="line"># Smoke/health-only pings (quick check)</div>
<div class="line">powershell -NoProfile -ExecutionPolicy Bypass -File .\Scripts\Tests.ps1 -Smoke</div>
<div class="line"> </div>
<div class="line"># Override service URLs (if ports differ)</div>
<div class="line">powershell -NoProfile -ExecutionPolicy Bypass -File .\Scripts\Tests.ps1 `</div>
<div class="line">  -OrdersUrl &quot;http://localhost:5107&quot; `</div>
<div class="line">  -CatalogUrl &quot;http://localhost:5107&quot; `</div>
<div class="line">  -InventoryUrl &quot;http://localhost:5107&quot; `</div>
<div class="line">  -ProductsUrl &quot;http://localhost:5107&quot; `</div>
<div class="line">  -AuthUrl &quot;http://localhost:5107&quot;</div>
<div class="line"> </div>
<div class="line"># Provide DB connection string for tests (if not present in environment)</div>
<div class="line">powershell -NoProfile -ExecutionPolicy Bypass -File .\Scripts\Tests.ps1 `</div>
<div class="line">  -ConnectionString &quot;Server=localhost;Database=LSSDb;User Id=...;Password=...;Encrypt=True;TrustServerCertificate=True;&quot;</div>
<div class="line"> </div>
<div class="line"># Filter tests (passes through to `dotnet test --filter`)</div>
<div class="line">powershell -NoProfile -ExecutionPolicy Bypass -File .\Scripts\Tests.ps1 -Filter &quot;FullyQualifiedName~OrdersContractTests&quot;</div>
</div><!-- fragment --><p>The script sets or echoes the environment variables listed above and orchestrates optional smoke HTTP checks before invoking <span class="tt">dotnet test</span>.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
HTTPie Collections</h1>
<ul>
<li>Location: <span class="tt">/Scripts/httpie-collection-*.json</span></li>
<li>Format: HTTPie Desktop export (<span class="tt">meta.schema: <a href="https://schema.httpie.io/1.0.0.json">https://schema.httpie.io/1.0.0.json</a></span>).</li>
<li>Collections cover: auth roles, users, orders, order-items, products, warehouses, warehouse-products.</li>
<li>Usage: import into HTTPie Desktop (or compatible tooling) and execute requests against the configured base URL. Some collections include a bearer token in the exported file; replace with a valid token for your environment if required.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
Security Notes (as implemented)</h1>
<ul>
<li>The database schema includes a <span class="tt">Users</span> table with <span class="tt">PasswordClear</span> (plain-text) column (see <span class="tt">CreateTables.sql</span>).</li>
<li>Frontend/Backend JWT settings must match; the frontend reads the token from <span class="tt">AuthToken</span> cookie.</li>
<li>Endpoint authorization configuration is as described in <b>API Overview</b>.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
Commit History</h1>
<p><em>(From the repositoryâ€™s git log; messages grouped by commit day.)</em></p>
<div class="fragment"><div class="line">Commits on Oct 30, 2025</div>
<div class="line">    Enhance documentation and code clarity across various components</div>
<div class="line">    Add User class to frontend and remove redundant Warehouse constructor</div>
<div class="line">    import Thors Kode</div>
<div class="line">    Add TODO comment for retrieving all orders; update SQL script to include user selection</div>
<div class="line">    Views</div>
<div class="line"> </div>
<div class="line">Commits on Oct 29, 2025</div>
<div class="line">    Add HTTPie collections for OrderItem, Product, Warehouse, and WarehouseProduct endpoints</div>
<div class="line">    User-view, finally</div>
<div class="line"> </div>
<div class="line">Commits on Oct 27, 2025</div>
<div class="line">    Refactor seed data script for improved clarity and structure; added comprehensive order and user endpoint collections for HTTPie with authentication.</div>
<div class="line">    Refactored Name for Frontend</div>
<div class="line">    Updateret med Thors Kode</div>
<div class="line">    Implement authentication and authorization features with login and logout pages</div>
<div class="line"> </div>
<div class="line">Commits on Oct 24, 2025</div>
<div class="line">    Add parameterless constructors to Product, Warehouse, and WarehouseProduct classes</div>
<div class="line">    lavet parameterlÃ¸s klasse til orderitem og ordertypeenum</div>
<div class="line">    opdaterede program.cs til at virke med thors kode, fixede DTO pÃ¥ order sÃ¥ den virkede med Dapper.</div>
<div class="line">    Hentet thors branch</div>
<div class="line">    Comment Code</div>
<div class="line"> </div>
<div class="line">Commits on Oct 23, 2025</div>
<div class="line">    fjernet udkommentering af thors kode</div>
<div class="line">    opdaterede sql sÃ¦tninger, opdateret test script</div>
<div class="line">    Init Test Branch - outcomment thors kode for testning purposes</div>
<div class="line">    small thing</div>
<div class="line">    Fixes to order class</div>
<div class="line"> </div>
<div class="line">Commits on Oct 22, 2025</div>
<div class="line">    Refactor order and item tables and triggers</div>
<div class="line">    Fix relationship in ER diagram from SALESORDERS to ORDERS</div>
<div class="line">    Refactor ER diagram to consolidate order types</div>
<div class="line">    Adopted project structure</div>
<div class="line"> </div>
<div class="line">Commits on Oct 21, 2025</div>
<div class="line">    Oprettet Order klasser</div>
<div class="line"> </div>
<div class="line">Commits on Oct 20, 2025</div>
<div class="line">    Warehouse, SKU, Product classes created</div>
<div class="line">    API Endpoints</div>
<div class="line">    Opdateret ER-Diagram</div>
<div class="line">    User, connectionsettings og sql statements</div>
<div class="line">    Initial Udkast til ER-Diagram</div>
<div class="line">    Init C# Project</div>
<div class="line">    Update copyright holders in LICENSE file</div>
<div class="line">    Initial commit</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md24"></a>
License</h1>
<ul>
<li>See <span class="tt">LICENSE</span> in the repository root.</li>
</ul>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md26"></a>
Notes on exact defaults and ports</h2>
<ul>
<li>Backend default HTTP port: <span class="tt">5107</span> (per <span class="tt">Lagerstyrings System/Properties/launchSettings.json</span>).</li>
<li>Frontend default HTTP/HTTPS ports: <span class="tt">5267</span> / <span class="tt">7267</span> (per <span class="tt">Lagerstyring Frontend/Properties/launchSettings.json</span>).</li>
<li>Frontend <span class="tt">Api:BaseUrl</span> default: <span class="tt"><a href="http://localhost:5107">http://localhost:5107</a></span>.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md27"></a>
Known cookies</h2>
<ul>
<li><span class="tt">AuthToken</span> â€” JWT bearer token stored as HttpOnly cookie by the frontend on successful login.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md28"></a>
Known issues</h2>
<ul>
<li><b>Consistent test failure (HTTP 500):</b> One automated test returns HTTP 500 when run under the test harness; the same scenario succeeds outside the tests. Root cause is under investigation.</li>
<li><b>Auth mismatch (frontend vs. backend):</b> Problem in Frontend, while frontend routes still require authentication, backend routes does not. If Frontend is not desired, or are fixed, authentication can easily be enabled again by removing <span class="tt">.AllowAnonymous()</span> where needed.</li>
<li><b>Deprecated code present:</b> Some legacy/deprecated code remains due to time constraints. It does not affect current functionality but should be removed in a future cleanup. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
